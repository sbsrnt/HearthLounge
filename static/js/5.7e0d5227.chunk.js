webpackJsonp([5],{1821:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),c=a.n(i),s=a(10),u=a(1934),o=a(1942),d=a(1943),h=a(588),p=a(174),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),m=function(e){function t(){var e,a,l,i;n(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return a=l=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),l.handleUserDecksClick=function(){l.props.fetchDecks(l.props.activeUser.uid)},l.handleFetchAllUsers=function(){l.props.activeUser&&l.props.activeUser.role<3&&l.props.fetchAllUsers()},i=a,r(l,i)}return l(t,e),f(t,[{key:"componentDidMount",value:function(){document.title="Dashboard"}},{key:"render",value:function(){return c.a.createElement("div",{className:"container__page container__page--twoSided dashboard"},c.a.createElement(u.a,null),c.a.createElement("div",{className:"container__page--inner container__page--right"},c.a.createElement(o.a,{handleUserDecksClick:this.handleUserDecksClick,handleFetchAllUsers:this.handleFetchAllUsers}),c.a.createElement(d.a,null)))}}]),t}(i.Component),b=function(e){return{activeUser:e.users.activeUser}},v=function(e){return{fetchDecks:function(t){return e(Object(h.b)(t))},fetchAllUsers:function(){return e(Object(p.b)())}}};t.default=Object(s.b)(b,v)(m)},1824:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(594),i=a.n(l),c=a(1),s=a.n(c),u=a(13),o=a.n(u),d=function(e){var t=e.isEditing,a=e.handleEditClick,n=e.handleSaveClick,l=e.title,c=e.hasSaveBtn,s=e.btnText,u=e.handleInputChange,d=e.popover,h=e.newPassword,p=t?"Cancel":"Edit",f=t?"":"display-none",m=o.a.startCase(l),b=o.a.snakeCase(l),v=function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement("input",{onChange:function(e){return u(e)},type:"password",id:"confirm_new_password"}),r.a.createElement("button",{onClick:function(e){return n(e)},id:b,className:"btn btn__update btn__darkBorder"},"Confirm"))};return r.a.createElement("div",{className:"details-header"},r.a.createElement("h3",null,m),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){return a(e)},id:"editing_"+b,className:"btn btn__default"+(t?"--active":"")+" btn__darkBorder"},p),function(){return c&&d?r.a.createElement(i.a,{content:r.a.createElement(v,null),title:"Confirm password",trigger:"click",visible:t&&h.length>0},t&&r.a.createElement("button",{className:"btn btn__update btn__darkBorder"},"Save")):r.a.createElement("button",{onClick:function(e){return n(e)},id:b,className:"btn btn__"+(s?"delete":"update")+" btn__darkBorder "+f},s||"Save")}()))};t.a=d,d.propTypes={isEditing:s.a.bool.isRequired,handleEditClick:s.a.func.isRequired,handleSaveClick:s.a.func.isRequired,title:s.a.string.isRequired}},1838:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(27),i=a.n(l),c=a(13),s=a.n(c),u=function(e){var t=e.id,a=e.title,n=e.placeholder,l=e.disabled,c=e.handleInputChange,u=s.a.capitalize(a),o="battle tag"!==a?r.a.createElement("p",null,"https://",a,".",function(){switch(a){case"facebook":case"twitter":case"youtube":return"com";case"twitch":return"tv";default:return a}}(),"/"):null;return r.a.createElement("label",{htmlFor:t},r.a.createElement(i.a,{title:u,placement:"right"},r.a.createElement("span",{className:"hs-icon icon-"+("battletag"===t?"battlenet":t)})),r.a.createElement("div",{className:"wrapper"},o,r.a.createElement("input",{onChange:c,disabled:!l,id:t,placeholder:n})))};t.a=u},1934:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=a(0),s=a.n(c),u=a(10),o=a(1935),d=a(1937),h=a(1940),p=a(1941),f=a(583),m=a(45),b=a(12),v=a(589),E=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),g=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleSaveClick=function(e){var t=a.props.activeUser,r=t.uid,l=e.target.id,i=!a.state[l];a.setState(n({},"editing_"+l,i));var c=function(e){return null!==a.state[e]?a.state[e]:t[e]};switch(l){case"details":return Object(f.a)(a.state.email);case"hearthstone":return Object(f.b)(r,c("battletag"),c("favouriteClass"),c("region"));case"social_media":return Object(f.c)(r,c("facebook"),c("twitter"),c("twitch"),c("youtube"));default:return l}},a.handleDeleteAccountClick=function(){a.props.deleteUser(a.props.activeUser)},a.handleReauthenticationClick=function(){(0,a.props.reauthenticate)(a.props.activeUser.email,a.state.reauthPassword)},a.state={editing_account:!1,editing_hearthstone:!1,editing_social_media:!1,editing_delete_account:!1,email:"",avatar:"",new_password:"",confirm_new_password:"",battletag:"",favouriteClass:"",region:"",facebook:"",twitter:"",twitch:"",youtube:"",isReauthenticated:!1,reauthPassword:""},a}return i(t,e),E(t,[{key:"handleEditClick",value:function(e){var t=e.target.id,a=!this.state[t];this.setState(n({},t,a))}},{key:"validateState",value:function(e,t){return null!==this.state[t]?this.state[t]:e[t]}},{key:"handleInputChange",value:function(e){var t=e.target.id,a=e.target.value;this.setState(n({},t,a))}},{key:"handleSelectChange",value:function(e,t){this.setState(n({},t,e))}},{key:"render",value:function(){var e=this,t=this.props.activeUser;return s.a.createElement("div",{className:"container__page--inner container__page--left"},s.a.createElement("h3",{className:"sidebar__header"},"Profile"),s.a.createElement("div",{className:"sidebar__body"},s.a.createElement("div",{className:"about"},s.a.createElement("div",{className:"avatar"},t.avatar?s.a.createElement("img",{src:t.avatar,alt:t.username+"'s profile"}):s.a.createElement(b.a,{name:"login"})),s.a.createElement("div",{className:"username"},t.username),s.a.createElement("div",{className:"rank"},t.rank)),s.a.createElement("ul",null,s.a.createElement(o.a,{user:t,newPassword:this.state.new_password,isEditing:this.state.editing_account,handleEditClick:function(t){return e.handleEditClick(t)},handleInputChange:function(t){return e.handleInputChange(t)},handleSaveClick:this.handleSaveClick}),s.a.createElement(d.a,{user:t,isEditing:this.state.editing_hearthstone,handleEditClick:function(t){return e.handleEditClick(t)},handleInputChange:function(t){return e.handleInputChange(t)},handleSelectChange:function(t,a){return e.handleSelectChange(t,a)},handleSaveClick:this.handleSaveClick}),s.a.createElement(h.a,{user:t,isEditing:this.state.editing_social_media,handleEditClick:function(t){return e.handleEditClick(t)},handleInputChange:function(t){return e.handleInputChange(t)},handleSaveClick:this.handleSaveClick}),s.a.createElement(p.a,{isEditing:this.state.editing_delete_account,reauthPassword:this.state.reauthPassword,handleDeleteAccountClick:this.handleDeleteAccountClick,handleReauthenticationClick:this.handleReauthenticationClick,handleEditClick:function(t){return e.handleEditClick(t)},handleInputChange:function(t){return e.handleInputChange(t)},handleSaveClick:this.handleSaveClick}))))}}]),t}(c.PureComponent),C=function(e){return{activeUser:e.users.activeUser}},k=function(e){return{deleteUser:function(){return e(Object(v.b)())},reauthenticate:function(t,a){return e({type:m.e,payload:{email:t,password:a}})}}};t.a=Object(u.b)(C,k)(g)},1935:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(1824),i=a(1936),c=function(e){var t=e.user,a=e.newPassword,n=e.handleEditClick,c=e.isEditing,s=e.handleInputChange,u=e.handleSaveClick;return r.a.createElement("li",{className:"details"},r.a.createElement(l.a,{title:"Account",popover:!0,hasSaveBtn:!0,newPassword:a,handleInputChange:s,handleEditClick:n,isEditing:c,handleSaveClick:u}),r.a.createElement("div",{className:"details-content"},r.a.createElement(i.a,{id:"email",title:"e-mail",placeholder:t.email,disabled:c,handleInputChange:s}),t.updatedProfile?null:r.a.createElement(i.a,{id:"username",title:"username",placeholder:t.username,disabled:c,handleInputChange:s}),r.a.createElement(i.a,{id:"avatar",title:"Avatar",placeholder:t.avatar,disabled:c,handleInputChange:s}),r.a.createElement(i.a,{id:"new_password",title:"new password",disabled:c,handleInputChange:s})))};t.a=c},1936:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(1),i=a.n(l),c=a(13),s=a.n(c),u=function(e){var t=e.id,a=e.title,n=e.value,l=e.disabled,i=e.handleInputChange,c=e.placeholder,u=e.type,o=s.a.capitalize(a);return r.a.createElement("label",{htmlFor:t},r.a.createElement("p",null,o),r.a.createElement("div",{className:"wrapper"},r.a.createElement("input",{onChange:function(e){return i(e)},type:u||"text",placeholder:c,disabled:!l,id:t,value:n})))};t.a=u,u.propTypes={id:i.a.string.isRequired,disabled:i.a.bool.isRequired,handleInputChange:i.a.func.isRequired,placeholder:i.a.string,title:i.a.string,type:i.a.string,value:i.a.string}},1937:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(1),i=a.n(l),c=a(1824),s=a(1838),u=a(1938),o=function(e){var t=e.user,a=e.handleEditClick,n=e.isEditing,l=e.handleSaveClick,i=e.handleInputChange,o=e.handleSelectChange,d=function(e,a){return t[e]?t[e]:a};return r.a.createElement("li",{className:"hearthstone"},r.a.createElement(c.a,{title:"hearthstone",handleEditClick:a,isEditing:n,handleSaveClick:l}),r.a.createElement("div",{className:"details-content"},r.a.createElement(s.a,{id:"battletag",title:"battle tag",placeholder:d("battletag","battletag#0000"),disabled:n,handleInputChange:i}),r.a.createElement(u.a,{id:"classes",title:"favourite_class",placeholder:d("favourite_class","classes"),disabled:n,handleSelectChange:o}),r.a.createElement(u.a,{id:"region",title:"region",placeholder:d("region","EU > NA"),disabled:n,handleSelectChange:o})))};o.propTypes={user:i.a.object.isRequired,isEditing:i.a.bool.isRequired,handleEditClick:i.a.func.isRequired,handleSaveClick:i.a.func.isRequired,handleInputChange:i.a.func.isRequired,handleSelectChange:i.a.func.isRequired},t.a=o},1938:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(176),i=a.n(l),c=a(1939),s=function(e){var t=e.id,a=e.title,n=e.placeholder,l=e.disabled,s=e.handleSelectChange,u=i.a.Option,o=r.a.createElement("span",{className:"hs-icon icon-warlock placeholder-icon"}),d=function(e){return c.a[e].map(function(t){return r.a.createElement(u,{className:e+"-list "+a,title:t,instancePrefix:t,optionIndex:t,option:t,value:t,key:t},r.a.createElement("span",{className:"hs-icon icon-"+t.toLowerCase()}),r.a.createElement("p",{className:e},t))})};return r.a.createElement("label",{htmlFor:t},r.a.createElement("p",null,a,":"),function(e,t){return r.a.createElement(i.a,{multiple:!1,style:{width:"50%"},placeholder:t,allowClear:!0,showSearch:!0,disabled:!l,onChange:function(e){return s(e,a)}},d(e))}(t,"classes"===n?o:n))};t.a=s},1939:function(e,t,a){"use strict";var n=a(81);t.a={region:["Americas","Asia","Europe"],classes:n.a.playerClass.map(function(e){return e.name})}},1940:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(1),i=a.n(l),c=a(1824),s=a(1838),u=function(e){var t=e.user,a=e.handleEditClick,n=e.isEditing,l=e.handleInputChange,i=e.handleSaveClick,u=function(e){return t[e]?t[e]:"N/A"};return r.a.createElement("li",{className:"social-media"},r.a.createElement(c.a,{title:"social-media",handleEditClick:a,isEditing:n,handleSaveClick:i}),r.a.createElement("div",{className:"details-content"},r.a.createElement(s.a,{id:"facebook",title:"facebook",placeholder:u("facebook"),disabled:n,handleInputChange:l}),r.a.createElement(s.a,{id:"twitter",title:"twitter",placeholder:u("twitter"),disabled:n,handleInputChange:l}),r.a.createElement(s.a,{id:"twitch",title:"twitch",placeholder:u("twitch"),disabled:n,handleInputChange:l}),r.a.createElement(s.a,{id:"youtube",title:"youtube",placeholder:u("youtube"),disabled:n,handleInputChange:l})))};t.a=u,u.propTypes={user:i.a.object.isRequired,isEditing:i.a.bool.isRequired,handleEditClick:i.a.func.isRequired,handleInputChange:i.a.func.isRequired,handleSaveClick:i.a.func.isRequired}},1941:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(1),i=a.n(l),c=a(1824),s=a(49),u=function(e){var t=e.isEditing,a=e.reauthPassword,n=e.handleDeleteAccountClick,l=e.handleReauthenticationClick,i=e.handleEditClick,u=e.handleInputChange,o=!t&&a.length>=0||t&&0===a.length?"disabled":"update";return r.a.createElement("li",{className:"danger-zone"},r.a.createElement(c.a,{isEditing:t,handleEditClick:i,handleSaveClick:n,hasSaveBtn:!1,btnText:"Delete",title:"Delete Account"}),r.a.createElement("div",{className:"details-content"},r.a.createElement("label",{htmlFor:"reauthPassword"},r.a.createElement(s.a,{text:"Reauthenticate",type:o,handleClick:l}),r.a.createElement("div",{className:"wrapper"},r.a.createElement("input",{onChange:u,type:"password",placeholder:"password",disabled:!t,id:"reauthPassword",value:a})))))};t.a=u,u.propTypes={isEditing:i.a.bool.isRequired,handleDeleteAccountClick:i.a.func.isRequired,handleReauthenticationClick:i.a.func.isRequired,handleEditClick:i.a.func.isRequired,handleInputChange:i.a.func.isRequired,handleSaveClick:i.a.func.isRequired}},1942:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(10),i=a(12),c=function(e){var t=e.activeUser,a=e.handleUserDecksClick,n=e.handleFetchAllUsers,l=t.role;return r.a.createElement("ul",{className:"topbar has-icons"},r.a.createElement("li",{className:"deck",onClick:a},r.a.createElement(i.a,{name:"deck",title:"Your decks",tooltip:!0})),l<3&&r.a.createElement("li",{className:"deck",onClick:n},r.a.createElement(i.a,{name:"login",title:"Users",tooltip:!0})))},s=function(e){return{activeUser:e.users.activeUser}};t.a=Object(l.b)(s,null)(c)},1943:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(10),i=a(1944),c=a(1945),s=function(e){var t=e.activeUserDecks,a=e.allUsers;return r.a.createElement("div",{className:"content"},r.a.createElement(i.a,{activeUserDecks:t}),r.a.createElement(c.a,{allUsers:a}))},u=function(e){var t=e.users;return{activeUserDecks:t.activeUserDecks,allUsers:t.allUsers}};t.a=Object(l.b)(u,null)(s)},1944:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(31),i=a(581),c=function(e){var t=e.activeUserDecks,a=t.loading,n=t.all;return r.a.createElement("div",{className:"decks"},a?r.a.createElement(l.a,null):n&&n.length>0?r.a.createElement("ul",null,"Your decks: ",r.a.createElement("br",null)," ",function(){return n.map(function(e){return r.a.createElement("li",{key:e.deckId},r.a.createElement(i.a,{d:e,handleDeckClick:function(){return null}}))})}()):r.a.createElement("p",null,"You don't have any decks. Create one!"))};t.a=c},1945:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=a(0),s=a.n(c),u=a(10),o=a(13),d=a.n(o),h=a(31),p=a(590),f=a(591),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),b=function(e){function t(){r(this,t);var e=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleInputChange=function(t,a){var r,l=t.currentTarget.dataset.uid,i=t.currentTarget.value;e.setState(n({},l,Object.assign({},e.state[l],(r={},n(r,a,"role"===a?+i:i),n(r,"updatedProfile",!(!e.state[l]||!e.state[l].usernames.includes("@")&&!d.a.isEmpty(e.state[l].usernames))),r))))},e.handleUserDeletion=function(t){var a=t.currentTarget.value;e.props.deleteUser(a)},e.handleUserUpdate=function(t){var a=t.currentTarget.value;e.state[a]&&(e.props.updateUser(Object.assign({},n({uid:a},a,e.state[a]))),e.setState(n({},a,null)))},e.cancelChanges=function(t){var a=t.currentTarget.value;e.setState(n({},a,null))},e.userss=function(){return e.props.allUsers.users.map(function(t){var a=t.uid,n=e.state[a]&&null===e.state[a],r=e.state[a]&&null!==e.state[a];return s.a.createElement("tr",{key:a},s.a.createElement("td",null,s.a.createElement("input",{"data-uid":a,value:e.state[a]?e.state[a].username:t.username,onChange:function(t){return e.handleInputChange(t,"usernames")}})),s.a.createElement("td",null,s.a.createElement("input",{"data-uid":a,value:e.state[a]?e.state[a].email:t.email,onChange:function(t){return e.handleInputChange(t,"email")}})),s.a.createElement("td",null,s.a.createElement("input",{"data-uid":a,type:"number",value:e.state[a]?e.state[a].role:t.role,onChange:function(t){return e.handleInputChange(t,"role")}})),s.a.createElement("td",null,s.a.createElement("button",{className:"btn btn__"+(n||!e.state[a]?"default":"update"),value:a,onClick:e.handleUserUpdate},"Update"),s.a.createElement("button",{className:"btn btn__delete",value:a,onClick:e.handleUserDeletion},"Remove"),s.a.createElement("button",{className:"btn btn__"+(r?"default--active":"default"),value:a,onClick:e.cancelChanges},"Cancel")))})},e.usersTable=function(){return s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Username"),s.a.createElement("th",null,"Email"),s.a.createElement("th",null,"Role"),s.a.createElement("th",null,"Settings"))),s.a.createElement("tbody",null,e.userss()))},e.state={},e}return i(t,e),m(t,[{key:"render",value:function(){var e=this.props.allUsers,t=e.loading,a=e.users;return s.a.createElement("div",{className:"decks"},t?s.a.createElement(h.a,null):a&&a.length>0?s.a.createElement("div",null,"Users: ",this.usersTable()):s.a.createElement("p",null))}}]),t}(c.Component),v=function(e){return{deleteUser:function(t){return e(Object(p.b)(t))},updateUser:function(t){return e(Object(f.b)(t))}}};t.a=Object(u.b)(null,v)(b)}});
//# sourceMappingURL=5.7e0d5227.chunk.js.map